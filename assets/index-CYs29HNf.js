(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();var x=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],p=t=>{let e=0;for(let r=0;r<t.length;r++){let a=t[r],n=x.indexOf(a);e=e*83+n}return e},b=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},v=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},N=t=>t<0?-1:1,w=(t,e)=>N(t)*Math.pow(Math.abs(t),e),C=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},O=t=>{if(!t||t.length<6)throw new C("The blurhash string must be at least 6 characters");let e=p(t[0]),r=Math.floor(e/9)+1,a=e%9+1;if(t.length!==4+2*a*r)throw new C(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*a*r}`)},_=t=>{let e=t>>16,r=t>>8&255,a=t&255;return[b(e),b(r),b(a)]},S=(t,e)=>{let r=Math.floor(t/361),a=Math.floor(t/19)%19,n=t%19;return[w((r-9)/9,2)*e,w((a-9)/9,2)*e,w((n-9)/9,2)*e]},T=(t,e,r,a)=>{O(t),a=a|1;let n=p(t[0]),s=Math.floor(n/9)+1,o=n%9+1,u=(p(t[1])+1)/166,d=new Array(o*s);for(let i=0;i<d.length;i++)if(i===0){let c=p(t.substring(2,6));d[i]=_(c)}else{let c=p(t.substring(4+i*2,6+i*2));d[i]=S(c,u*a)}let l=e*4,h=new Uint8ClampedArray(l*r);for(let i=0;i<r;i++)for(let c=0;c<e;c++){let y=0,M=0,E=0;for(let g=0;g<s;g++)for(let m=0;m<o;m++){let f=Math.cos(Math.PI*c*m/e)*Math.cos(Math.PI*i*g/r),I=d[m+g*o];y+=I[0]*f,M+=I[1]*f,E+=I[2]*f}let L=v(y),z=v(M),P=v(E);h[4*c+0+i*l]=L,h[4*c+1+i*l]=z,h[4*c+2+i*l]=P,h[4*c+3+i*l]=255}return h},$=T,A={};class B{constructor(){this.imageGrid=document.getElementById("imageGrid"),this.observerTarget=document.getElementById("observerTarget"),this.loading=!0,this.page=1,this.per_page=window.innerWidth>=1345?8:6,this.imageSize=null,this.setupIntersectionObserver(),this.fetchImages()}async fetchImages(){try{let r=await(await fetch(`https://api.unsplash.com/collections/Lyz89J_lfpY/photos?per_page=${this.per_page}&page=${this.page}`,{headers:{Authorization:`Client-ID ${A.UNSPLASH_KEY}`}})).json();if(r.errors)throw r.errors[0];this.renderImages(r)}catch(e){this.renderError(e),console.error("Error fetching images:",e),this.loading=!1}finally{this.loading=!1}}generatePrice(){return`$${(Math.random()*100+20).toFixed(2)}`}getImageSize(e){const{width:r,height:a}=e.getBoundingClientRect();return this.imageSize={width:parseInt(r),height:parseInt(a)},this.imageSize}getImageBlur(e,r,a){console.log(this.itemsToFetchCount,window.innerWidth),console.log(r,a);const n=document.createElement("canvas"),s=n.getContext("2d"),o=s.createImageData(r,a),u=$(e,r,a);return o.data.set(u),s.putImageData(o,0,0),n.toDataURL()}renderError(e){const r=document.createElement("p");r.className="error",r.innerHTML=e,document.body.appendChild(r)}renderImages(e){let r=0;e==null||e.forEach(a=>{const n=document.createElement("div");n.className="image-wraper",n.setAttribute("data-id",a.id);const s=document.createElement("div");s.className="image-container";const o=document.createElement("div");o.className="product-info";const u=document.createElement("h3");u.className="product-title",u.textContent=a.description||a.alt_description||"-";const d=document.createElement("div");d.className="product-price",d.textContent=this.generatePrice();const l=document.createElement("img");l.className="lazy-image",l.alt=a.alt_description||"Product",l.loading="lazy",o.appendChild(u),o.appendChild(d),n.appendChild(s),n.appendChild(o),this.imageGrid.appendChild(n);const h=this.imageSize?this.imageSize:this.getImageSize(s);s.style.backgroundImage=`url(${this.getImageBlur(a.blur_hash,h.width,h.height)})`,l.src=a.urls.regular,s.appendChild(l),window.setTimeout(()=>{n.classList.add("appear")},r),r+=200}),r=0}setupIntersectionObserver(){new IntersectionObserver(r=>{r[0].isIntersecting&&!this.loading&&(this.page++,this.fetchImages())},{rootMargin:"100px",threshold:.1}).observe(this.observerTarget)}}document.addEventListener("DOMContentLoaded",()=>{new B});
